function e(e){i.store(e)||g('expect useStore argument to be a store');let t=l.useRef(e),n=l.useState(e.getState())[1];return h((()=>(t.current===e&&n(e.getState()),t.current=e,e.updates.watch(n))),[e]),e.getState()}function t({store:t,keys:n,fn:r}){i.store(t)||g('useStoreMap expects a store'),Array.isArray(n)||g('useStoreMap expects an array as keys'),'function'!=typeof r&&g('useStoreMap expects a function');let o=l.useMemo((()=>m(r(t.getState(),n)).on(t,((e,t)=>r(t,n)))),n),u=e(o);return h((()=>()=>{o.off(t),p(o,{deep:1})}),n),u}function n(e,t){return t.displayName=e,t}function r(t,r){function o(t){let n=l.useRef(t),o=e(u);h((()=>(a({props:n.current,state:u.getState()}),()=>{f({props:n.current,state:u.getState()})})),[]);let s=r(t,o);return n.current=t,s}let u;i.store(t)?u=t:'object'==typeof t&&null!==t?u=y(t):g('shape should be a store or object with stores');let s='Unknown';u&&u.shortName&&(s=u.shortName);let a=d(),f=d();return o.mounted=a,o.unmounted=f,n(s+".View",o)}function o(e){return r(e,(({children:e},t)=>e(t)))}function u(e,r){let o,u=[];'object'==typeof r&&null!==r?(r.keys&&(u=r.keys),o=r.fn):o=r,i.store(e)||g('expect useList first argument to be a store'),'function'!=typeof o&&g("expect useList's renderItem to be a function"),Array.isArray(u)||g("expect useList's keys to be an array");let s=l.useMemo((()=>{let r=n((e.shortName||'Unknown')+".Item",(({index:n,keys:r})=>{let o=t({store:e,keys:[n,...r],fn:(e,t)=>e[t[0]]});return f.current(o,n)}));return l.memo(r)}),[e]),a=t({store:e,keys:[e],fn:e=>e.length}),f=l.useRef(o);f.current=o;let c=l.useMemo((()=>u),u);return Array.from({length:a},((e,t)=>l.createElement(s,{index:t,key:t,keys:c})))}function s(t,r){return n(`Connect(${r.displayName||r.name||'Unknown'})`,(n=>l.createElement(r,Object.assign({},n,e(t)))))}function a(e,t={}){let n=l.useRef(null);h((()=>(e.open(n.current),()=>e.close(n.current))),[e]),((e,t)=>{if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return 0;for(let r=0;r<n.length;r++){let o=n[r];if(e[o]!==t[o])return 0}return 1}return 0})(n.current,t)||(n.current=t,e.set(t))}function f(e="gate",t={}){let r;return'object'==typeof e&&null!==e&&('defaultState'in e&&(t=e.defaultState),e.domain&&(r=e.domain),e=e.name),(({name:e="gate",domain:t,defaultState:r,hook:o})=>{function u(e){return o(u,e),null}let s=d(),a=d(),f=d(),c=m(Boolean(0),{named:'status'}).on(a,(()=>Boolean(1))).on(f,(()=>Boolean(0))),l=m(r,{named:'state'}).on(s,((e,t)=>t)).reset(f);if(t){let{hooks:e}=t;k({target:[e.store,e.store,e.event,e.event,e.event],params:[c,l,a,f,s]})}return u.open=a,u.close=f,u.status=c,u.state=l,u.set=s,n("Gate:"+e,u)})({name:e,domain:r,defaultState:t,hook:a})}function c(e){return e}import l from'react';import{is as i,createStore as m,clearNode as p,combine as y,createEvent as d,launch as k}from'effector/effector.mjs';let h='undefined'!=typeof window?l.useLayoutEffect:l.useEffect,g=e=>{throw Error(e)},S=(t,r,o)=>n((t.shortName||'Unknown')+".ContextComponent",(n=>{let u=l.useContext(r),s=e(t);return o(n,s,u)})),b=e=>t=>{let n=e;return'function'!=typeof e&&(n=t,t=e),s(t,n)};export{b as connect,r as createComponent,S as createContextComponent,f as createGate,s as createReactState,o as createStoreConsumer,c as useEvent,a as useGate,u as useList,e as useStore,t as useStoreMap};
//# sourceMappingURL=effector-react.mjs.map
