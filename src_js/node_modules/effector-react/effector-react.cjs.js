function e(e){return e&&'object'==typeof e&&'default'in e?e.default:e}function t(e){effector.is.store(e)||f('expect useStore argument to be a store');let t=c.useRef(e),r=c.useState(e.getState())[1];return l((()=>(t.current===e&&r(e.getState()),t.current=e,e.updates.watch(r))),[e]),e.getState()}function r({store:e,keys:r,fn:n}){effector.is.store(e)||f('useStoreMap expects a store'),Array.isArray(r)||f('useStoreMap expects an array as keys'),'function'!=typeof n&&f('useStoreMap expects a function');let o=c.useMemo((()=>effector.createStore(n(e.getState(),r)).on(e,((e,t)=>n(t,r)))),r),s=t(o);return l((()=>()=>{o.off(e),effector.clearNode(o,{deep:1})}),r),s}function n(e,t){return t.displayName=e,t}function o(e,r){function o(e){let n=c.useRef(e),o=t(s);l((()=>(u({props:n.current,state:s.getState()}),()=>{i({props:n.current,state:s.getState()})})),[]);let a=r(e,o);return n.current=e,a}let s;effector.is.store(e)?s=e:'object'==typeof e&&null!==e?s=effector.combine(e):f('shape should be a store or object with stores');let a='Unknown';s&&s.shortName&&(a=s.shortName);let u=effector.createEvent(),i=effector.createEvent();return o.mounted=u,o.unmounted=i,n(a+".View",o)}function s(e,r){return n(`Connect(${r.displayName||r.name||'Unknown'})`,(n=>c.createElement(r,Object.assign({},n,t(e)))))}function a(e,t={}){let r=c.useRef(null);l((()=>(e.open(r.current),()=>e.close(r.current))),[e]),((e,t)=>{if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return 0;for(let n=0;n<r.length;n++){let o=r[n];if(e[o]!==t[o])return 0}return 1}return 0})(r.current,t)||(r.current=t,e.set(t))}Object.defineProperty(exports,'__esModule',{value:1});var u=require('react'),effector=require('effector'),c=e(u);let l='undefined'!=typeof window?c.useLayoutEffect:c.useEffect,f=e=>{throw Error(e)};exports.connect=e=>t=>{let r=e;return'function'!=typeof e&&(r=t,t=e),s(t,r)},exports.createComponent=o,exports.createContextComponent=(e,r,o)=>n((e.shortName||'Unknown')+".ContextComponent",(n=>{let s=c.useContext(r),a=t(e);return o(n,a,s)})),exports.createGate=(e="gate",t={})=>{let r;return'object'==typeof e&&null!==e&&('defaultState'in e&&(t=e.defaultState),e.domain&&(r=e.domain),e=e.name),(({name:e="gate",domain:t,defaultState:r,hook:o})=>{function s(e){return o(s,e),null}let a=effector.createEvent(),u=effector.createEvent(),c=effector.createEvent(),l=effector.createStore(Boolean(0),{named:'status'}).on(u,(()=>Boolean(1))).on(c,(()=>Boolean(0))),f=effector.createStore(r,{named:'state'}).on(a,((e,t)=>t)).reset(c);if(t){let{hooks:e}=t;effector.launch({target:[e.store,e.store,e.event,e.event,e.event],params:[l,f,u,c,a]})}return s.open=u,s.close=c,s.status=l,s.state=f,s.set=a,n("Gate:"+e,s)})({name:e,domain:r,defaultState:t,hook:a})},exports.createReactState=s,exports.createStoreConsumer=e=>o(e,(({children:e},t)=>e(t))),exports.useEvent=e=>e,exports.useGate=a,exports.useList=(e,t)=>{let o,s=[];'object'==typeof t&&null!==t?(t.keys&&(s=t.keys),o=t.fn):o=t,effector.is.store(e)||f('expect useList first argument to be a store'),'function'!=typeof o&&f("expect useList's renderItem to be a function"),Array.isArray(s)||f("expect useList's keys to be an array");let a=c.useMemo((()=>{let t=n((e.shortName||'Unknown')+".Item",(({index:t,keys:n})=>{let o=r({store:e,keys:[t,...n],fn:(e,t)=>e[t[0]]});return l.current(o,t)}));return c.memo(t)}),[e]),u=r({store:e,keys:[e],fn:e=>e.length}),l=c.useRef(o);l.current=o;let i=c.useMemo((()=>s),s);return Array.from({length:u},((e,t)=>c.createElement(a,{index:t,key:t,keys:i})))},exports.useStore=t,exports.useStoreMap=r;
//# sourceMappingURL=effector-react.cjs.js.map
