'use strict';function e(e){return e&&'object'==typeof e&&'default'in e?e.default:e}function t(e){c.is.store(e)||p('expect useStore argument to be a store');var t=f.useRef(e),n=f.useState(e.getState())[1];return i((function(){return t.current===e&&n(e.getState()),t.current=e,e.updates.watch(n)}),[e]),e.getState()}function n(e){var n=e.store,r=e.keys,o=e.fn;c.is.store(n)||p('useStoreMap expects a store'),Array.isArray(r)||p('useStoreMap expects an array as keys'),'function'!=typeof o&&p('useStoreMap expects a function');var u=f.useMemo((function(){return c.createStore(o(n.getState(),r)).on(n,(function(e,t){return o(t,r)}))}),r),a=t(u);return i((function(){return function(){u.off(n),c.clearNode(u,{deep:1})}}),r),a}function r(e,t){return t.displayName=e,t}function o(e,n){function o(e){var r=f.useRef(e),o=t(u);i((function(){return s({props:r.current,state:u.getState()}),function(){l({props:r.current,state:u.getState()})}}),[]);var a=n(e,o);return r.current=e,a}var u;c.is.store(e)?u=e:'object'==typeof e&&null!==e?u=c.combine(e):p('shape should be a store or object with stores');var a='Unknown';u&&u.shortName&&(a=u.shortName);var s=c.createEvent(),l=c.createEvent();return o.mounted=s,o.unmounted=l,r(a+".View",o)}function u(e,n){return r("Connect("+(n.displayName||n.name||'Unknown')+")",(function(r){return f.createElement(n,Object.assign({},r,t(e)))}))}function a(e,t){void 0===t&&(t={});var n=f.useRef(null);i((function(){return e.open(n.current),function(){return e.close(n.current)}}),[e]),function(e,t){if(e===t)return 1;if('object'==typeof e&&null!==e&&'object'==typeof t&&null!==t){var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return 0;for(var o=0;o<n.length;o++){var u=n[o];if(e[u]!==t[u])return 0}return 1}return 0}(n.current,t)||(n.current=t,e.set(t))}Object.defineProperty(exports,'__esModule',{value:1});var s=require('react'),c=require('effector/compat'),f=e(s),i='undefined'!=typeof window?f.useLayoutEffect:f.useEffect,p=function(e){throw Error(e)};exports.connect=function(e){return function(t){var n=e;return'function'!=typeof e&&(n=t,t=e),u(t,n)}},exports.createComponent=o,exports.createContextComponent=function(e,n,o){return r((e.shortName||'Unknown')+".ContextComponent",(function(r){var u=f.useContext(n),a=t(e);return o(r,a,u)}))},exports.createGate=function(e,t){var n;return void 0===e&&(e='gate'),void 0===t&&(t={}),'object'==typeof e&&null!==e&&('defaultState'in e&&(t=e.defaultState),e.domain&&(n=e.domain),e=e.name),function(e){function t(e){return s(t,e),null}var n=e.name,o=void 0===n?'gate':n,u=e.domain,a=e.defaultState,s=e.hook,f=c.createEvent(),i=c.createEvent(),p=c.createEvent(),l=c.createStore(Boolean(0),{named:'status'}).on(i,(function(){return Boolean(1)})).on(p,(function(){return Boolean(0)})),m=c.createStore(a,{named:'state'}).on(f,(function(e,t){return t})).reset(p);if(u){var v=u.hooks;c.launch({target:[v.store,v.store,v.event,v.event,v.event],params:[l,m,i,p,f]})}return t.open=i,t.close=p,t.status=l,t.state=m,t.set=f,r("Gate:"+o,t)}({name:e,domain:n,defaultState:t,hook:a})},exports.createReactState=u,exports.createStoreConsumer=function(e){return o(e,(function(e,t){return(0,e.children)(t)}))},exports.useEvent=function(e){return e},exports.useGate=a,exports.useList=function(e,t){var o,u=[];'object'==typeof t&&null!==t?(t.keys&&(u=t.keys),o=t.fn):o=t,c.is.store(e)||p('expect useList first argument to be a store'),'function'!=typeof o&&p("expect useList's renderItem to be a function"),Array.isArray(u)||p("expect useList's keys to be an array");var a=f.useMemo((function(){var t=r((e.shortName||'Unknown')+".Item",(function(t){var r=t.index,o=n({store:e,keys:[r].concat(t.keys),fn:function(e,t){return e[t[0]]}});return i.current(o,r)}));return f.memo(t)}),[e]),s=n({store:e,keys:[e],fn:function(e){return e.length}}),i=f.useRef(o);i.current=o;var l=f.useMemo((function(){return u}),u);return Array.from({length:s},(function(e,t){return f.createElement(a,{index:t,key:t,keys:l})}))},exports.useStore=t,exports.useStoreMap=n;
//# sourceMappingURL=compat.js.map
